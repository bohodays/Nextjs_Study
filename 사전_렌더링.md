### 1. 사전 렌더링

---

- `사전 렌더링`이란?
  - 브라우저의 요청에 따라 사전에 렌더링이 완료된 HTML을 응답하는 렌더링 방식
  - **Client Side Rendering의 단점을 효율적으로 해결하는 기술**

<br>

### 2. Client Side Rending

---

- 렌더링 방식
  1. 접속요청 (유저 -> 브라우저(클라이언트) -> 서버)
  2. 서버는 브라우저에게 index.html(빈껍데기) 응답
  3. 브라우저는 유저에게 빈 화면 렌더링
  4. 서버는 브라우저에게 JS Bundle을 후속 응답
  5. 브라우저는 서버로 받은 JS 파일 실행
  6. 컨텐츠가 렌더링되어 유저에게 화면이 표시됨
- 장점
  - 페이지 이동이 매우 빠르고 쾌적하다
    - 초기 접속 시 모든 파일을 받아서 적절한 컴포넌트 배치
- 단점
  - 초기 접속 속도가 느리다. (FCP가 느림)
    - 초기 접속 시 모든 파일을 받기 때문
  - FCP(First Contentful Paint) : 요청시작 시점으로부터 컨텐츠가 화면에 처음 나타나는데 걸리는 시간
    - FCP가 클수록 사용자의 이탈률이 증가함

<br>

### 3. 사전 렌더링 방식

---

- 렌더링 방식
  1. 접속요청 (유저 -> 브라우저(클라이언트) -> 서버)
  2. 서버측에서 JS파일 직접 실행(렌더링)
     - `렌더링`: 자바스크립트 코드(React 컴포넌트)를 HTML로 변환하는 과정
  3. 서버는 브라우저에게 렌더링된 HTML 응답
  4. 브라우저는 서버로부터 받은 HTML 파일을 유저에게 그대로 화면에 렌더링
     - `렌더링`: HTML 코드를 브라우저가 화면에 그려내는 작업
     - **현재 단계에서는 자바스크립트 코드가 없어서 인터렉션(상호작용) 불가**
  5. 서버가 브라우저에게 JS Bundle을 후속 응답
     - 전달되는 JS Bundle은 요청 페이지에 해당하는 코드만 담겨있음
  6. 브라우저는 서버로 받은 JS 파일 실행(HTML과 연결)
     - **상호작용 가능한 페이지**
     - HTML과 JS 파일을 연결시키는 것을 `Hydration`이라고 함
  7. 유저가 페이지 이동 요청 시 Client Side Rendering 방식으로 처리 **(Hydration을 위해서 JS Bundle을 전달했기 때문)**
     - 브라우저가 JS 실행 (컴포넌트 교체)
     - 브라우저가 페이지를 교체하여 유저에게 표시

### 4. 더 상세화된 사전 렌더링 방식

---

- 렌더링 방식 (Next.js SSR + Hydration + CSR 전환)
  1. 유저가 웹페이지 접속 요청 (브라우저 → 서버)
  2. 서버는 React 컴포넌트를 실행하여 HTML을 생성 (서버 측 렌더링)
     - `렌더링`: 자바스크립트(React 컴포넌트)를 HTML로 변환하는 과정
  3. 서버는 브라우저에 HTML 응답을 전달
  4. 브라우저는 받은 HTML을 화면에 렌더링
     - `렌더링`: HTML을 시각적으로 브라우저에 그려내는 작업
     - 이 시점에는 JS가 아직 실행되지 않아 상호작용 불가능
  5. 브라우저는 HTML 내 포함된 `<script>`를 통해 JS Bundle을 다운로드
     - 요청 페이지에 해당하는 최소한의 코드만 포함됨
  6. 브라우저는 JS Bundle을 실행하여 기존 HTML과 연결 (Hydration)
     - 이 과정을 통해 상호작용 가능한 페이지 완성
  7. 유저가 페이지 이동 요청 시 Client Side Rendering 방식으로 처리
     - 브라우저가 JS 실행 (컴포넌트 교체)
     - 브라우저가 페이지를 교체하여 유저에게 표시
     - 💡 이때, 브라우저는 viewport 내의 <Link> 컴포넌트를 감지하고 pre-fetching 시작
       - 백그라운드에서 이동 대상 페이지의 JS chunk 및 data를 미리 받아둠
